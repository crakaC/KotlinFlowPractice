plugins {
    id "org.jetbrains.kotlin.jvm" version "1.6.10"
    id "com.diffplug.spotless" version "6.3.0"
}

dependencies {
    implementation("org.jetbrains.kotlin:kotlin-stdlib")
    implementation("org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.0")
    implementation("org.jetbrains.kotlinx:kotlinx-coroutines-test:1.6.0")
}

sourceSets.main.kotlin.srcDirs = ["src/"]

repositories {
    mavenCentral()
}

task prepare {
    doLast {
        def paths = []
        sourceSets.main.runtimeClasspath.each {
            paths <<= it.toString()
        }
        file("classpath").text = String.join(":", paths)
    }
}

apply plugin: "com.diffplug.spotless"
spotless {
    kotlin {
        target("**/*.kt")
        ktlint()
    }
}